<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TOKYO MD5</title>

<style>
body{
    margin:0;
    font-family:Arial, Helvetica, sans-serif;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    overflow:hidden;
    color:white;
}

/* container */
.container{
    width:360px;
    background:rgba(255,255,255,0.05);
    border-radius:20px;
    padding:25px;
    backdrop-filter:blur(10px);
    box-shadow:0 0 30px rgba(0,0,0,0.6);
    position:relative;
    z-index:2;
}

h1{
    text-align:center;
    letter-spacing:3px;
    margin-bottom:5px;
}

.sub{
    text-align:center;
    opacity:0.7;
    margin-bottom:20px;
}

/* input */
input{
    width:100%;
    padding:12px;
    border-radius:10px;
    border:none;
    outline:none;
    background:#0d1b2a;
    color:#00eaff;
    font-size:14px;
}

/* rainbow button */
button{
    margin-top:15px;
    width:100%;
    padding:12px;
    border:none;
    border-radius:10px;
    font-weight:bold;
    font-size:16px;
    color:white;
    cursor:pointer;
    background:linear-gradient(45deg,red,orange,yellow,green,cyan,blue,purple);
    background-size:400% 400%;
    animation:rainbow 5s linear infinite;
    box-shadow:0 0 20px rgba(255,255,255,0.5);
}

@keyframes rainbow{
    0%{background-position:0% 50%;}
    100%{background-position:100% 50%;}
}

.result{
    margin-top:20px;
    text-align:center;
}

.big{
    font-size:30px;
    font-weight:bold;
}

.red{ color:#ff4d4d; }
.green{ color:#00ff9d; }

/* bars */
.bar{
    width:100%;
    height:12px;
    background:#222;
    border-radius:10px;
    overflow:hidden;
    margin:6px 0;
}

.fill{
    height:100%;
    width:0%;
    transition:1s;
}

.tai{ background:linear-gradient(90deg,#ff0000,#ffcc00); }
.xiu{ background:linear-gradient(90deg,#ffcc00,#ff0000); }

/* info boxes */
.row{
    display:flex;
    gap:10px;
    margin-top:15px;
}

.box{
    flex:1;
    background:rgba(255,255,255,0.08);
    border-radius:12px;
    padding:10px;
    font-size:14px;
}

/* sakura */
.sakura{
    position:fixed;
    top:-50px;
    font-size:20px;
    animation:fall linear forwards;
    z-index:1;
}

@keyframes fall{
    to{
        transform:translateY(110vh) rotate(360deg);
        opacity:0;
    }
}

</style>
</head>

<body>

<div class="container">

    <h1>TOKYO MD5</h1>
    <div class="sub">Nh·∫≠p m√£ MD5 ƒë·ªÉ ph√¢n t√≠ch</div>

    <input id="md5" placeholder="Nh·∫≠p MD5...">

    <button onclick="phanTich()">PH√ÇN T√çCH</button>

    <div class="result">

        <div>D·ª± ƒëo√°n:</div>
        <div id="ketqua" class="big">---</div>

        <!-- bars -->
        <div>T√†i</div>
        <div class="bar"><div id="taiBar" class="fill tai"></div></div>

        <div>X·ªâu</div>
        <div class="bar"><div id="xiuBar" class="fill xiu"></div></div>

        <div class="row">
            <div class="box">
                T·ªâ l·ªá<br>
                <b id="tile">0%</b>
            </div>

            <div class="box">
                Nh√† c√°i<br>
                <b id="nhacai">---</b>
            </div>
        </div>

    </div>

</div>

<script>

/* ===== hoa r∆°i ===== */
function createSakura(){
    const el = document.createElement("div");
    el.className="sakura";
    el.innerHTML="üå∏";
    el.style.left=Math.random()*100+"vw";
    el.style.animationDuration=(5+Math.random()*5)+"s";
    document.body.appendChild(el);
    setTimeout(()=>el.remove(),10000);
}
setInterval(createSakura,300);


/* ===== thu·∫≠t to√°n si√™u n√¢ng c·∫•p ===== */

function hexToInt(h){
    return parseInt(h,16) >>> 0;
}

function rotateLeft(n,b){
    return (n<<b) | (n>>>(32-b));
}

function phanTich(){

    let md5=document.getElementById("md5").value.trim();

    if(md5.length<32){
        alert("MD5 kh√¥ng h·ª£p l·ªá");
        return;
    }

    // chia 4 ph·∫ßn
    let a=hexToInt(md5.substring(0,8));
    let b=hexToInt(md5.substring(8,16));
    let c=hexToInt(md5.substring(16,24));
    let d=hexToInt(md5.substring(24,32));

    // tr·ªôn nhi·ªÅu l·ªõp
    let mix1=(a^b^c^d)>>>0;
    let mix2=rotateLeft(mix1,7) ^ rotateLeft(b,11);
    let mix3=(mix2 + c + rotateLeft(d,3))>>>0;

    // ƒë·∫£o md5
    let rev=md5.split("").reverse().join("");
    let extra=hexToInt(rev.substring(0,8));

    let final=((mix3 ^ extra) % 100 + 100) % 100;

    // d·ª± ƒëo√°n
    let ketqua= final>=50 ? "T√ÄI":"X·ªàU";

    // ƒë·ªô tin c·∫≠y ƒë·ªông
    let diff=Math.abs(final-50);
    let percent=60 + Math.floor(diff*0.8);
    if(percent>98) percent=98;

    // ph√°t hi·ªán b·∫•t th∆∞·ªùng
    let canThiep=(mix3%9===0 || mix3%11===0)?"Can thi·ªáp":"An to√†n";

    // hi·ªÉn th·ªã
    let kqEl=document.getElementById("ketqua");
    kqEl.innerHTML=ketqua;
    kqEl.className="big "+(ketqua==="T√ÄI"?"red":"green");

    document.getElementById("tile").innerHTML=percent+"%";
    document.getElementById("nhacai").innerHTML=canThiep;

    // thanh %
    let taiPercent= final;
    let xiuPercent= 100-final;

    document.getElementById("taiBar").style.width=taiPercent+"%";
    document.getElementById("xiuBar").style.width=xiuPercent+"%";
}

</script>

</body>
</html>
